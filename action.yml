name: Secrets Deploy
author: gitgregoryjones 
description: Build,Push a docker image to Amazon ECR (create if not found), Create Task Definition, Push ENV variables from ASM and restart ECS service
inputs:
  access-key-id:
    description: Access key for IAM User.
  secret-access-key:
    description: Secret access key for IAM User.
  project-name:
    description: The name of this project will be used as ECR repository created/updated
  stage:
    description: Will be used to read secrets from {project-name}-{stage} Secrets Manager path [dev,stage,prod,etc] and pushed to container ENV
    required: false
  region:
    description: AWS Region to use.  Defaults to us-east-2.
    required: false
runs:
  using: node12
  main: 'main.js'
branding:
  icon: upload
  color: orange
